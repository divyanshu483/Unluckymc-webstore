<header id="header" class="site-header">
  <div class="site-header-inner">
    

    <h1 class="site-title">
      <a href="/">
        {% if store.logo %}
          <img src="{{ store.logo }}" alt="{{ store.name }}" />
        {% else %}
          {{ store.name }}
        {% endif %}
      </a>
    </h1>

    
<div style="display: flex; align-items: center; justify-content: flex-end; gap: 10px; width: 100%; max-width: 1200px; margin: 20px auto; padding: 0 15px; box-sizing: border-box;">

    {% if config('server-url') %}
    <div class="copy-ip" data-copy="{{ config('server-url') }}" 
         style="background: rgba(20, 42, 61, 0.7); border: 2px solid rgba(35, 61, 84, 0.8); border-radius: 10px; padding: 10px 18px; display: flex; align-items: center; gap: 12px; cursor: pointer; transition: 0.3s; position: relative; border-bottom: 2px solid rgba(255,255,255,0.05);">
        
        <img src="https://webstore-template-assets.tebex.io/images/server-logo.svg" style="width: 18px; height: 18px; opacity: 0.7;" alt="Server">
        
        <strong style="color: #cbd5e0; font-family: 'Inter', sans-serif; font-size: 16px; letter-spacing: 0.3px; font-weight: 800;">
            {{ config('server-url') }}
        </strong>

        <span class="copy-status" style="display:none; position: absolute; top: -35px; left: 50%; transform: translateX(-50%); background: #2ecc71; color: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold;">Copied!</span>
    </div>
    {% endif %}

    {% if config('discord-link') %}
    <a href="{{ config('discord-link') }}" target="_blank" 
       style="background-color: #5865F2; border-radius: 10px; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; transition: 0.3s; flex-shrink: 0; text-decoration: none;"
       onmouseover="this.style.backgroundColor='#4752c4'" onmouseout="this.style.backgroundColor='#5865F2'">
        <img src="https://webstore-template-assets.tebex.io/images/discord.svg" style="width: 24px; height: 24px; filter: brightness(0) invert(1);" alt="Discord">
    </a>
    {% endif %}

</div>

<script>
document.querySelectorAll('.copy-ip').forEach(button => {
    button.onclick = function() {
        const ip = this.getAttribute('data-copy');
        const tooltip = this.querySelector('.copy-status');
        
        navigator.clipboard.writeText(ip).then(() => {
            tooltip.style.display = 'block';
            setTimeout(() => { tooltip.style.display = 'none'; }, 2000);
        });
    };
});
</script>

  </div>

  {% if config('sale-banner-text') %}
    <p class="site-sale-banner">
      {{ config('sale-banner-text') }}
    </p>
  {% endif %}

  {% if isNavigationVertical == false %}
    {% include "navigation.twig" %}
  {% endif %}
</header>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<style>
    @media (max-width: 768px) {
        .category-box {
            flex-direction: column !important; /* Stacks everything vertically */
            text-align: center;
            gap: 15px !important;
            padding: 15px !important;
        }
        
        .category-box > div {
            margin-left: 0 !important; /* Removes the "auto" push on mobile */
            justify-content: center !important;
            width: 100%;
        }
        .header-promo-box:hover {
          transform: none !important; /* Disable lift on mobile for better stability */
        }

        .category-box .text-container {
            text-align: center !important;
        }

        .button-container {
            flex-wrap: wrap;
            justify-content: center !important;
        }
    }
</style>

<div style="display: flex; justify-content: center; width: 100%; margin: 0 auto; padding: 10px 20px; box-sizing: border-box;">
    <div class="category-box header-promo-box" style="background-color: #142a3d; border: 3px solid #233d54; border-radius: 15px; padding: 25px; width: 100%; max-width: 1200px; box-sizing: border-box; display: flex; align-items: center; gap: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); transition: all 0.3s ease;">
        <div style="flex-shrink: 0;">
            <img src="https://dunb17ur4ymx4.cloudfront.net/webstore/logos/8f55cc1f75ea262639d8667738af12825382726d.png" alt="Coins" style="max-width: 70px; height: auto; border-radius: 5px;">
        </div>
        <div class="text-container" style="text-align: left; display: flex; flex-direction: column; gap: 2px; flex-grow: 1;">
            <h2 style="color: #ffffff; font-weight: 900; margin: 0; font-family: sans-serif; font-size: 24px; letter-spacing: 1px;">UnluckyMc</h2>
            <p style="color: #2ecc71; margin: 0; font-family: sans-serif; font-size: 12px; font-weight: 800; letter-spacing: 0.5px; text-transform: uppercase;">The Only Official Store!</p>
        </div>
        <div class="button-container" style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap; justify-content: flex-end;">
            <select id="manualCurrencySelector" onchange="convertPrices()" style="background-color: #0d1b28; color: #fff; padding: 0 15px; border: 1px solid #233d54; border-radius: 8px; font-weight: bold; height: 40px; font-size: 12px;">
                <option value="USD">USD ($)</option>
                <option value="INR">INR (₹)</option>
                <option value="EUR">EUR (€)</option>
            </select>
            <div style="display: flex; gap: 10px;">
                {% if basket.username %}
                    <a href="/checkout/logout" style="color: #fff; background-color: #2ecc71; padding: 0 18px; border-radius: 8px; text-decoration: none; font-weight: bold; font-size: 13px; height: 40px; display: flex; align-items: center;">
                        <i class="fa fa-user"></i> {{ basket.ign }}
                    </a>
                {% else %}
                    <a href="/login" style="color: #fff; background-color: #2ecc71; padding: 0 18px; border-radius: 8px; text-decoration: none; font-weight: bold; font-size: 13px; height: 40px; display: flex; align-items: center;">LOGIN</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
{% if page.category == "index" %}
<div class="site-home-categories" style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; width: 100%; max-width: 1240px; margin: 20px auto; padding: 0 20px; box-sizing: border-box;">
    {% for category in store.categories %}
        <div class="category-wrapper" style="flex: 1 1 400px; max-width: 100%; box-sizing: border-box;">
            
    <a href="https://store.unluckymc.fun/category/{{ category.name }}" style="text-decoration: none; display: block;">
        <div class="category-box" style="background-color: #142a3d; border-radius: 15px; padding: 25px; box-sizing: border-box; display: flex; align-items: center; justify-content: space-between; border: 3px solid #233d54; position: relative; overflow: hidden; transition: all 0.3s ease; min-height: 140px;">
            
            {# Purple Bar #}
            <div style="position: absolute; left: 0; top: 20%; bottom: 20%; width: 6px; background-color: #d11aff; border-radius: 0 4px 4px 0;"></div>
            
            <div style="text-align: left; padding-left: 15px;">
                <h2 style="color: #ffffff; font-weight: 900; margin: 0; font-family: sans-serif; font-size: 26px; letter-spacing: 0.5px; line-height: 1.2;">{{ category.name }}</h2>
                <p style="color: #a0aec0; margin: 10px 0 0; font-family: sans-serif; font-size: 14px; font-weight: 700;">
                    Click to view <i class="fa fa-caret-right"></i>
                </p>
            </div>

            <div style="margin-left: 10px; flex-shrink: 0;">
                {% if category.image %}
                    <img src="{{ category.image }}" alt="{{ category.name }}" style="max-width: 85px; height: auto; display: block;">
                {% else %}
                    <i class="fa fa-folder-open" style="font-size: 35px; color: #233d54;"></i>
                {% endif %}
            </div>
        </div>
    </a>

</div>
    {% endfor %}
    {% endif %}
<style>/*--- FIXED CATEGORY HOVER EFFECTS --- */
/* Specific hover for the Top Promo Box */
.header-promo-box {
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
}

.header-promo-box:hover {
    transform: translateY(-3px);
    border-color: #2ecc71 !important; /* Glows Green to match your 'Official Store' text */
    box-shadow: 0 15px 35px rgba(46, 204, 113, 0.15) !important;
    background-color: #1a354d !important;
}

/* Make the logo in the top box pulse on hover */
.header-promo-box:hover img {
    transform: scale(1.05) rotate(2deg);
    transition: transform 0.3s ease;
}

/* Keep the buttons inside from moving too much */
.header-promo-box .button-container {
    transition: transform 0.3s ease;
}
/* Targets the box when you hover anywhere over the link or the wrapper */
.category-wrapper:hover .category-box {
    transform: translateY(-5px) !important;
    background-color: #1a354d !important; /* Slightly lighter blue */
    border-color: #d11aff !important;    /* Purple border glow */
    box-shadow: 0 10px 20px rgba(209, 26, 255, 0.2) !important;
}

/* Optional: Make the image pulse slightly on hover */
.category-wrapper:hover img {
    transform: scale(1.05);
    transition: transform 0.3s ease;
}

/* Smooth transition for the box */
.category-box {
    transition: all 0.3s ease-in-out !important;
}

/* Hover effect for the sub-category buttons */
.category-wrapper .sub-grid a:hover {
    background-color: #d11aff !important;
    color: #ffffff !important;
    border-style: solid !important;
    transform: scale(1.05);
}</style>
</div>
<script>
function convertPrices() {
    const selector = document.getElementById('manualCurrencySelector');
    const currency = selector.value;
    
    // Set your manual conversion rates here
    const rates = {
        "USD": 1,
        "INR": 90,   // Matches your current rate
        "EUR": 0.92
    };

    const symbols = {
        "USD": "$",
        "INR": "₹",
        "EUR": "€"
    };

    const rate = rates[currency];
    const symbol = symbols[currency];

    // 1. Update the Main Price (Current/Sale Price)
    document.querySelectorAll('.package-price').forEach(el => {
        // We get the sale price first, if it exists
        const salePriceAttr = el.getAttribute('data-sale-price');
        const basePriceAttr = el.getAttribute('data-base-price');
        
        let baseValue = parseFloat(basePriceAttr);
        let saleValue = parseFloat(salePriceAttr);
        
        // Decide which value to show in the main box
        let activePrice = (saleValue > 0 && saleValue < baseValue) ? saleValue : baseValue;
        
        let convertedPrice = (activePrice * rate).toFixed(2);
        
        // Update the text inside the strong tag
        const priceDisplay = el.querySelector('strong') || el;
        priceDisplay.innerText = symbol + convertedPrice;
    });

    // 2. Update the Strikethrough (Old) Price
    document.querySelectorAll('.package-discount-old').forEach(el => {
        const oldBase = parseFloat(el.getAttribute('data-base-old'));
        if (oldBase > 0) {
            let convertedOld = (oldBase * rate).toFixed(2);
            el.innerText = symbol + convertedOld;
        }
    });
}
</script>
<script>
    // Force show only on Home Page
    document.addEventListener("DOMContentLoaded", function() {
        var path = window.location.pathname;
        var grid = document.getElementById("home-category-grid");
        
        // If path is "/" or empty or includes "index", it's the home page
        if (path === "/" || path === "" || path.includes("index")) {
            grid.style.setProperty('display', 'flex', 'important');
        }
    });
</script>
</div>
